<form [formGroup]="form" class="settings-form">
  <div class="row">
    <div class="col-10">
      <h2>{{ 'SETTINGS.PARAM_CONFIG.SERVER.TITLE' | translate}}</h2>
    </div>
    <div class="col-2 text-right" stimLibUiContentToggler [toggledContent]="settings" [icon]="icon">
      <i class="fas fa-minus" #icon></i></div>
  </div>
  <div #settings>

    <!-- Automatické připojení ke stimulátoru -->
    <div class="col-12">
      <div class="form-row">
        <div class="col-6 vertical-center justify-content-start">
          <label
            for="settings-server-stimulator-autoconnect">{{ 'SETTINGS.PARAM_CONFIG.SERVER.STIMULATOR_AUTOCONNECT' | translate}}</label>
        </div>
        <div class="col-6 vertical-center">
          <input class="form-check-input" type="checkbox"
                 id="settings-server-stimulator-autoconnect"
                 formControlName="autoconnectToStimulator">
        </div>
      </div>
    </div>

    <!-- Maximální doba na odpověď ze stimulátoru -->
    <div class="col-12">
      <div class="form-row">
        <div class="col-6 vertical-center justify-content-start">
          <label
            for="settings-server-stimulator-response-timeout">{{ 'SETTINGS.PARAM_CONFIG.SERVER.STIMULATOR_RESPONSE_TIMEOUT' | translate}}</label>
        </div>
        <div class="col-6 vertical-center">
          <div class="row p-0 m-0 w-100">
            <div class="col-12 p-0 m-0">
              <div class="input-group input-group-sm">
                <input class="form-control form-control-sm" type="number"
                       id="settings-server-stimulator-response-timeout"
                       formControlName="stimulatorResponseTimeout"
                       [class.is-invalid]="stimulatorResponseTimeout.invalid">
                <div class="input-group-append">
                  <span class="input-group-text">ms</span>
                </div>
              </div>
            </div>
            <div class="col-12">
              <small
                *ngIf="stimulatorResponseTimeout.touched && stimulatorResponseTimeout.errors?.min"
                class="form-text text-muted">{{ 'APP.VALIDATION.MIN' | translate:{ min: stimulatorResponseTimeout.errors?.min.min } }}</small>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Nastavení parametrů pro seriovou linku -->
    <div class="col-12" [formGroupName]="'serial'">
      <div class="row">
        <div class="col-10">
          <h3>{{ 'SETTINGS.PARAM_CONFIG.SERVER.SERIAL.TITLE' | translate}}</h3>
        </div>
        <div class="col-2 text-right" stimLibUiContentToggler [toggledContent]="serial"
             [icon]="icon"><i class="fas fa-minus" #icon></i></div>
      </div>
      <div class="col-12" #serial>
        <!-- BaudRate -->
        <div class="form-row">
          <div class="col-6 vertical-center justify-content-start">
            <label
              for="settings-server-stimulator-serial-baudrate">{{ 'SETTINGS.PARAM_CONFIG.SERVER.SERIAL.BAUDRATE.TITLE' | translate}}</label>
          </div>
          <div class="col-6 vertical-center">
            <select id="settings-server-stimulator-serial-baudrate"
                    class="selectpicker form-control form-control-sm" formControlName="baudRate">
              <option [ngValue]="null"
                      disabled>{{ 'SETTINGS.PARAM_CONFIG.SERVER.SERIAL.BAUDRATE.SELECT' | translate}}</option>
              <option *ngFor="let baudrate of baudrates" [ngValue]="baudrate">
                <span><i class="fas fa-flag"></i> {{baudrate}}</span>
              </option>
            </select>
          </div>
        </div>

        <!-- BaudRate -->
        <div class="form-row">
          <div class="col-6 vertical-center justify-content-start">
            <label
              for="settings-server-stimulator-serial-databits">{{ 'SETTINGS.PARAM_CONFIG.SERVER.SERIAL.DATABITS.TITLE' | translate}}</label>
          </div>
          <div class="col-6 vertical-center">
            <select id="settings-server-stimulator-serial-databits"
                    class="selectpicker form-control form-control-sm" formControlName="dataBits">
              <option [ngValue]="null"
                      disabled>{{ 'SETTINGS.PARAM_CONFIG.SERVER.SERIAL.DATABITS.SELECT' | translate}}</option>
              <option *ngFor="let dataBit of dataBits" [ngValue]="dataBit">
                <span><i class="fas fa-flag"></i> {{dataBit}}</span>
              </option>
            </select>
          </div>
        </div>

        <!-- StopBits -->
        <div class="form-row">
          <div class="col-6 vertical-center justify-content-start">
            <label
              for="settings-server-stimulator-serial-stopbits">{{ 'SETTINGS.PARAM_CONFIG.SERVER.SERIAL.STOPBITS.TITLE' | translate}}</label>
          </div>
          <div class="col-6 vertical-center">
            <select id="settings-server-stimulator-serial-stopbits"
                    class="selectpicker form-control form-control-sm" formControlName="stopBits">
              <option [ngValue]="null"
                      disabled>{{ 'SETTINGS.PARAM_CONFIG.SERVER.SERIAL.STOPBITS.SELECT' | translate}}</option>
              <option *ngFor="let stopBit of stopBits" [ngValue]="stopBit">
                <span><i class="fas fa-flag"></i> {{stopBit}}</span>
              </option>
            </select>
          </div>
        </div>

        <!-- Parity -->
        <div class="form-row">
          <div class="col-6 vertical-center justify-content-start">
            <label
              for="settings-server-stimulator-serial-parity">{{ 'SETTINGS.PARAM_CONFIG.SERVER.SERIAL.PARITY.TITLE' | translate}}</label>
          </div>
          <div class="col-6 vertical-center">
            <select id="settings-server-stimulator-serial-parity"
                    class="selectpicker form-control form-control-sm" formControlName="parity">
              <option [ngValue]="null"
                      disabled>{{ 'SETTINGS.PARAM_CONFIG.SERVER.SERIAL.PARITY.SELECT' | translate}}</option>
              <option *ngFor="let parity of paritys" [ngValue]="parity">
                <span><i class="fas fa-flag"></i> {{parity}}</span>
              </option>
            </select>
          </div>
        </div>

      </div>
    </div>
    <!-- Nastavení přehrávače assetů -->
    <div class="col-12" [formGroupName]="'assetPlayer'">
      <div class="row">
        <div class="col-10">
          <h3>{{ 'SETTINGS.PARAM_CONFIG.SERVER.ASSET_PLAYER.TITLE' | translate}}</h3>
        </div>
        <div class="col-2 text-right" stimLibUiContentToggler [toggledContent]="assetPlayer"
             [icon]="icon"><i class="fas fa-minus" #icon></i></div>
      </div>
      <div class="col-12" #assetPlayer>
        <!-- Šířka okna -->
        <div class="form-row">
          <div class="col-6 vertical-center justify-content-start">
            <label
              for="settings-server-asset-player-width">{{ 'SETTINGS.PARAM_CONFIG.SERVER.ASSET_PLAYER.WIDTH' | translate}}</label>
          </div>
          <div class="col-6">
            <div class="input-group input-group-sm">
              <input class="form-control form-control-sm" type="number"
                     id="settings-server-asset-player-width"
                     formControlName="width">
              <div class="input-group-append">
                <span class="input-group-text">px</span>
              </div>
          </div>
          </div>
        </div>

        <!-- Výška okna -->
        <div class="form-row">
          <div class="col-6 vertical-center justify-content-start">
            <label
              for="settings-server-asset-player-height">{{ 'SETTINGS.PARAM_CONFIG.SERVER.ASSET_PLAYER.HEIGHT' | translate}}</label>
          </div>
          <div class="col-6">
            <div class="input-group input-group-sm">
            <input class="form-control form-control-sm" type="number"
                   id="settings-server-asset-player-height"
                   formControlName="height">
              <div class="input-group-append">
                <span class="input-group-text">px</span>
              </div>
          </div>
          </div>
          </div>

          <!-- Celá obrazovka -->
          <div class="form-row">
            <div class="col-6 vertical-center justify-content-start">
              <label
                for="settings-server-asset-player-full-screen">{{ 'SETTINGS.PARAM_CONFIG.SERVER.ASSET_PLAYER.FULL_SCREEN' | translate}}</label>
            </div>
            <div class="col-6 vertical-center">
              <input class="form-check-input" type="checkbox"
                     id="settings-server-asset-player-full-screen"
                     formControlName="fullScreen">
            </div>
          </div>
      </div>
    </div>
    <!-- Nebezpečná zóna -->
    <div class="col-12">
      <div class="row">
        <div class="col-10">
          <h3
            class="text-danger">{{ 'SETTINGS.PARAM_CONFIG.SERVER.DANGER_ZONE.TITLE' | translate}}</h3>
        </div>
        <div class="col-2 text-right" stimLibUiContentToggler [toggledContent]="dangerZone"
             [icon]="icon"><i class="fas fa-minus" #icon></i></div>
      </div>
      <div class="row" #dangerZone>

        <!-- Inicializovat prázdnou databázi -->
        <div class="col-12">
          <div class="row">
            <div class="col-6">
              <p>{{ 'SETTINGS.PARAM_CONFIG.SERVER.DANGER_ZONE.SEED_DATABASE_TEXT' | translate }}</p>
            </div>
            <div class="col-6 vertical-center">
              <button class="btn btn-danger right"
                      (click)="handleSeedDatabase()">{{ 'SETTINGS.PARAM_CONFIG.SERVER.DANGER_ZONE.SEED_DATABASE' | translate }}</button>
            </div>
          </div>
        </div>

        <!-- Vymazat veškeré údaje z databáze -->
        <div class="col-12">
          <div class="row">
            <div class="col-6">
              <p>{{ 'SETTINGS.PARAM_CONFIG.SERVER.DANGER_ZONE.TRUNCATE_DATABASE_TEXT' | translate}}</p>
            </div>
            <div class="col-6 vertical-center">
              <button class="btn btn-danger right"
                      (click)="handleTruncateDatabase()">{{ 'SETTINGS.PARAM_CONFIG.SERVER.DANGER_ZONE.TRUNCATE_DATABASE' | translate }}</button>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</form>

<stim-lib-modal #modal></stim-lib-modal>
